<div
  class="d-flex flex-column align-items-center border-1 rounded bg-light p-3"
  style="border-style: dashed"
  (dragover)="onDragOver($event)"
  (dragleave)="onDragLeave($event)"
  (drop)="onDrop($event)"
  [class.drag-over]="isDraggingOver"
>
  <input
    type="file"
    class="d-none"
    id="file-upload"
    accept=".jpg, .jpeg, .png, .pdf, .doc, .docx, .xls, .xlsx"
    #fileUploadInput
    (change)="onFileSelected($event)"
    [multiple]="false"
  />
  <img
    src="assets/images/cloud_upload_24px.svg"
    alt="Upload Icon"
    class="mb-2"
  />

  <div class="d-block mb-2">Drop file here or</div>

  <button
    mat-flat-button
    color="primary"
    [disabled]="documents.length >= maxFile"
    class="fw-bold"
    (click)="handleUploadFile($event)"
  >
    SELECT FILES
  </button>

  <form
    [formGroup]="formGroup"
  >
    <ng-container formArrayName="documents">
      @for (fileInfo of documents.controls; track $index; let i = $index) {
        <div class="row border rounded my-2 mx-3" [formGroupName]="i">
          <div class="mt-3 col-sm-12">
              <div
                class="d-flex align-items-center justify-content-between px-3 py-2 row"
              >
                <div class="col-12 d-flex justify-content-between mb-2">
                  <div class="d-flex align-items-center me-3 text-break w-75">
                    <mat-icon class="me-1">file_copy</mat-icon>
                    <span class="fw-500">{{ fileInfo.value.file.name }}</span>
                  </div>
                  <mat-icon
                    (click)="remove(i)"
                    class="error"
                    role="button"
                    style="font-size: 30px; height: 30px; width: 30px"
                  >
                    cancel
                  </mat-icon>
                </div>
    
                <div class="col-6">
                  <mat-form-field appearance="outline" floatLabel="auto" class="w-100">
                    <mat-label i18n>Expiry Date</mat-label>
                    <input
                      matInput
                      readonly
                      [matDatepicker]="picker"
                      placeholder="Expiry Date"
                      formControlName="expirationDate"
                    />
                    <mat-datepicker-toggle
                      matIconSuffix
                      [for]="picker"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
        
                    @if (fileInfo.get("expirationDate")?.hasError("required")) {
                      <mat-error class="mt-0" i18n> This field is required </mat-error>
                    }
                  </mat-form-field>
                </div>
              </div>
          </div>
        </div>
      }
    </ng-container>
  </form>
</div>




