<h2 class="fw-bold mb-4 mb-lg-5">All Offers</h2>

@for (item of items; track item.id) {
  <div class="wrapper w-100 overflow-auto mb-4 mb-md-5">
    <div class="d-flex border rounded border-primary align-items-center justify-content-between gap-4 row-item">
      <div class="background-primary p-3 text-white text-center">
        <p class="text-uppercase fw-bold mb-1" i18n>bid amount</p>
        <h2 class="text-uppercase fw-bold mb-3" i18n>{{ item.bidAmount }}</h2>

        <button mat-flat-button class="fw-bold text-uppercase rounded py-2 px-3 primary counter-button" i18n>counter offer</button>
      </div>

      <div class="column-item">
        <p class="label" i18n>Bid date</p>
        <p class="content">{{ item.date }}</p>
      </div>

      <div class="column-item">
        <p class="label" i18n>amount</p>
        <p class="content fw-bold primary">{{ item.bidAmount }}</p>
      </div>

      <div class="column-item">
        <p class="label" i18n>Buyer Id</p>
        <p class="content fw-bold primary">{{ item.buyerId ?? '&nbsp;' }}</p>
      </div>

      <div class="column-item">
        <p class="label" i18n>Status</p>
        <p class="content fw-bold primary {{ item.status }}">{{ item.status }}</p>
      </div>

      <div class="column-item">
        <p class="label" i18n>Buyer Status</p>
        <p class="content fw-bold primary {{ item.buyerStatus }}">{{ item.buyerStatus ?? '&nbsp;' }}</p>
      </div>

      @if (canAcceptReject(item.status)) {
        <div class="d-flex gap-4">
          <button
            mat-flat-button
            type="button"
            class="accept-btn fw-bold background-primary border-primary text-white"
            [disabled]="actionLoading()"
            (click)="onAccept(item)"
          >
            Accept Offer
          </button>
          <button mat-flat-button type="button" class="reject-btn fw-bold text-white" [disabled]="actionLoading()" (click)="onReject(item)">
            Reject Offer
          </button>
        </div>
      } @else {
        <a routerLink="/offer-detail/{{ item.id }}">
          <button mat-stroked-button type="button" [disabled]="actionLoading()" class="view-detail-btn primary border-primary">
            View details
          </button>
        </a>
      }
    </div>
  </div>
} @empty {
  <h5 class="text-center">No offers yet!</h5>
}

@if (items.length) {
  <app-pagination class="mt-5" [pageNumber]="page" [totalCount]="totalItems" (pageChange)="onPageChange($event)"></app-pagination>
}
