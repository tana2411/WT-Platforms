<div class="w-100 mt-5" [formGroup]="filterForm">
  <!-- Search Bar Section -->
  <div class="row">
    <div class="col-10">
      <mat-form-field appearance="outline" class="w-100">
        <input matInput type="text" placeholder="What are you looking for?" formControlName="searchTerm" />
      </mat-form-field>
    </div>
    <div class="col-2">
      <button mat-flat-button class="background-primary w-100 h-100 fs-16" i18n>
        <mat-icon>search</mat-icon>
        Search
      </button>
    </div>
  </div>

  <!-- Filter Section -->
  <div class="mt-3 border background-on-primary rounded filter-wrapper">
    <div class="d-flex flex-wrap p-4 justify-content-between align-items-end">
      <!-- Select Filters - Left Side -->
      <div class="d-flex flex-wrap justify-content-start align-items-end gap-4 w-100">
        @for (item of activeFilter; track item.value) {
          @if (item.type == 'select') {
            <div class="{{ item.value }}-wrapper">
              <div class="small-mat-form-field d-flex flex-column align-items-start {{ item.value }}" style="width: 150px">
                <mat-label class="mb-2 text-wrap filter-item-label">{{ item.name }}</mat-label>
                <mat-form-field appearance="outline" class="w-100 bg-white">
                  <mat-select [formControlName]="item.value" placeholder="{{ item.placeholder ?? 'All' }}">
                    <mat-option [value]="null">All</mat-option>
                    @for (option of item.options; track $index) {
                      <mat-option [value]="getOptionValue(item, option)">
                        {{ option.name }}
                      </mat-option>
                    }
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          }

          @if (item.type == 'checkbox') {
            <div class="d-flex flex-column align-items-start align-self-end {{ item.value }}">
              <mat-label class="mb-2 filter-item-label">{{ item.name }}</mat-label>
              <div class="d-flex gap-2">
                @if (item.options && item.options.length === 1) {
                  <mat-checkbox class="large-checkbox" [formControlName]="item.options[0].value || item.value">
                    <span class="fw-bold">{{ item.options[0].name }}</span>
                  </mat-checkbox>
                } @else {
                  @for (option of item.options; track $index) {
                    <mat-checkbox class="large-checkbox" [formControlName]="option.value">
                      <span class="fw-bold">{{ option.name }}</span>
                    </mat-checkbox>
                  }
                }
              </div>
            </div>
          }
        }

        <!-- @for (item of activeFilter; track item.value) { -->
        <!-- @if (item.type == "checkbox") {
            <div class="d-flex flex-column align-items-start align-self-end">
              <mat-label class="fw-500 mb-2">{{ item.name }}</mat-label>
              <div class="d-flex gap-2">
                @if (item.options && item.options.length === 1) {
                  <mat-checkbox
                    class="large-checkbox"
                    [formControlName]="item.options[0].value || item.value"
                  >
                    <span class="fw-bold">{{ item.options[0].name }}</span>
                  </mat-checkbox>
                } @else {
                  @for (option of item.options; track $index) {
                    <mat-checkbox
                      class="large-checkbox"
                      [formControlName]="option.value"
                    >
                      <span class="fw-bold">{{ option.name }}</span>
                    </mat-checkbox>
                  }
                }
              </div>
            </div>
          } -->
        <!-- } -->
      </div>
    </div>
  </div>
</div>
