<app-admin-layout [title]="'Wanted Listings > Details'">
  @if (loadingListing()) {
    <app-spinner></app-spinner>
  } @else {
    @if (listingDetail(); as listingDetail) {
      <div
        mat-button
        class="d-inline-flex mb-5 align-items-center justify-content-center py-1 rounded px-2 background-primary text-white text-uppercase fw-bold cursor-pointer button-wrapper"
        (click)="onBack()"
      >
        <mat-icon class="icon">west</mat-icon>
        <span>go back</span>
      </div>

      <h2 class="fw-bold sub-title">Buyer Information</h2>

      <div class="table-item-rounded border border-primary p-3 p-lg-5 mb-4 buyer-information">
        <div class="row align-items-center">
          <div class="col-4">
            <h2 class="primary fw-bold mb-0">Buyer</h2>
          </div>
          <div class="col-4">
            <p class="text-uppercase fw-bold mb-2">Full name</p>
            <p class="mb-0">{{ listingDetail.userInformation.fullName }}</p>
          </div>
          <div class="col-4">
            <p class="text-uppercase fw-bold mb-2">Company</p>
            <p class="mb-0">{{ listingDetail.userInformation.company }}</p>
          </div>
        </div>
      </div>

      <h2 class="fw-bold sub-title">Material Information</h2>

      <div class="table-item-rounded border border-primary p-3 pb-0 p-lg-5 pb-lg-4 mb-4 mb-lg-5">
        <div class="d-flex flex-wrap">
          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">date listed</p>
            <p class="mb-0 fw-500">{{ listingDetail.listing.createdAt | dateFormat }}</p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">Material required</p>
            <p class="mb-0 fw-500">
              {{ listingDetail.listing.materialItem ? mapCodeToMaterialItem[listingDetail.listing.materialItem] : '' }}
            </p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">Storage</p>
            <p class="mb-0 fw-500">{{ listingDetail.listing.wasteStoration | titlecase }}</p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">Date required from</p>
            <p class="mb-0 fw-500">{{ listingDetail.listing.startDate | dateFormat }}</p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">quantity required</p>
            <p class="mb-0 fw-500">{{ listingDetail.materialInformation.materialWeightWanted | number }} MT</p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">status</p>
            <p class="mb-0 fw-500" [style.color]="getListingStatusColor(listingDetail.listing.status)">
              {{ listingDetail.bidStatus.status | titlecase }}
            </p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">Location</p>
            <p class="mb-0 fw-500">{{ mapCountryCodeToName[listingDetail.materialInformation.country] }}</p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">packaging</p>
            <p class="mb-0 fw-500">
              {{ listingDetail.materialInformation.packaging ? mapCodeToPackaging[listingDetail.materialInformation.packaging] : '' }}
            </p>
          </div>

          <div class="col-6 col-md-4 material-item mb-4">
            <p class="text-uppercase fw-bold mb-2 mb-xxl-3">State</p>
            <p class="mb-0 fw-500" [style.color]="getListingStateColor(listingDetail.listing.state)">
              {{ listingDetail.bidStatus.state | titlecase }}
            </p>
          </div>
        </div>
      </div>

      <app-listing-detail-actions [listingId]="listingId" [listing]="listingDetail" (refresh)="reloadListingDetail()" />
    }
  }
</app-admin-layout>
